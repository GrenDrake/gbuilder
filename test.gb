constant glk_window_open    = 34;
constant glk_set_window     = 47;

constant wintype_TextBuffer = 3;

function main(arg1, arg2) {
    local res, mainWindow;

    asm {
        gestalt 4 2 res;
        jz res bad_start;

        setiosys 2 0;

        // glk_window_open
        copy sp 0; // rock
        copy sp wintype_TextBuffer;
        copy sp 0;
        copy sp 0;
        copy sp 0;
        glk glk_window_open 5 mainWindow;
        jz mainWindow bad_start;
        label testme;

        // glk_set_window
        copy sp mainWindow;
        glk glk_set_window 1 0;
    }

    asm streamstr "Hello World!";
    asm streamchar '\n';
    asm streamstr "test [原文]篭毛 test";
    asm streamchar '\n';

    return;

    label bad_start;
    asm quit;
}

function setup_glk() {

}